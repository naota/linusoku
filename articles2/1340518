Path: news.gmane.org!not-for-mail
From: Takashi Iwai <tiwai@suse.de>
Newsgroups: gmane.linux.kernel,gmane.linux.alsa.devel
Subject: Re: [PATCH] ALSA: hda/realtek - Keep analog bypass muted on ALC892
Date: Thu, 09 Aug 2012 09:33:43 +0200
Lines: 52
Approved: news@gmane.org
Message-ID: <s5hboikfrjc.wl%tiwai@suse.de>
References: <1344494839-6942-1-git-send-email-thierry.reding@avionic-design.de>
	<s5hfw7wfszx.wl%tiwai@suse.de>
	<20120809071848.GB6979@avionic-0098.mockup.avionic-design.de>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
X-Trace: dough.gmane.org 1344497635 736 80.91.229.3 (9 Aug 2012 07:33:55 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Thu, 9 Aug 2012 07:33:55 +0000 (UTC)
Cc: Jaroslav Kysela <perex@perex.cz>,
	David Henningsson <david.henningsson@canonical.com>,
	alsa-devel@alsa-project.org, linux-kernel@vger.kernel.org
To: Thierry Reding <thierry.reding@avionic-design.de>
Original-X-From: linux-kernel-owner@vger.kernel.org Thu Aug 09 09:33:55 2012
Return-path: <linux-kernel-owner@vger.kernel.org>
Envelope-to: glk-linux-kernel-3@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-kernel-owner@vger.kernel.org>)
	id 1SzNFf-0002sI-H7
	for glk-linux-kernel-3@plane.gmane.org; Thu, 09 Aug 2012 09:33:51 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1756058Ab2HIHdq (ORCPT <rfc822;glk-linux-kernel-3@m.gmane.org>);
	Thu, 9 Aug 2012 03:33:46 -0400
Original-Received: from cantor2.suse.de ([195.135.220.15]:40252 "EHLO mx2.suse.de"
	rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
	id S1756015Ab2HIHdo (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
	Thu, 9 Aug 2012 03:33:44 -0400
Original-Received: from relay2.suse.de (unknown [195.135.220.254])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTP id 5E98499430;
	Thu,  9 Aug 2012 09:33:43 +0200 (CEST)
In-Reply-To: <20120809071848.GB6979@avionic-0098.mockup.avionic-design.de>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/24.1
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
Original-Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel:1340518 gmane.linux.alsa.devel:99859
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1340518>

At Thu, 9 Aug 2012 09:18:48 +0200,
Thierry Reding wrote:
> 
> On Thu, Aug 09, 2012 at 09:02:10AM +0200, Takashi Iwai wrote:
> > At Thu,  9 Aug 2012 08:47:19 +0200,
> > Thierry Reding wrote:
> > > 
> > > Unmuting the analog bypass causes any input to be directly bypassed to
> > > the outputs, which is usually not expected by the user.
> > > 
> > > Signed-off-by: Thierry Reding <thierry.reding@avionic-design.de>
> > > ---
> > > Note that this patch could be generalized to include all codec variants
> > > that have this second channel. As I don't have access to all the data
> > > sheets I'll leave that decision up to somebody with more hardware
> > > available.
> > 
> > Hmm, are you really sure that this is exclusive switch between two?
> > All Realtek codecs with this mixer widget mixes two sources up.
> > Otherwise it must not be a "mixer" widget at all but it must be a
> > "selector" widget.
> 
> It's not an exclusive switch. But the second input is the analog bypass
> that basically takes the signal directly from the input path and routes
> it to the output.

Ah so you mean it as the analog loopback path.
Normal users even want this often.

> > And I haven't received a bug report regarding this although ALC892 is
> > no new chip and the auto-parser has been enabled for so long time.
> 
> I've seen this happen when feeding a signal into the CD-IN (NID 0x1c),
> which is then directly routed to the output, so I actually hear that
> signal at the output, even if there is no software loopback to capture
> the input and play it back via the DAC.
> 
> This is probably not a very common use-case, so maybe nobody else has
> come across it. Looking at the block diagram in the ALC892 datasheet
> (page 5) clearly shows where the input of this second switch comes from.
> I don't think this is intended to be unmuted by default, but only in
> very special cases where you actually want to pass the analog input
> signal directly to the output without going through the ADC and back out
> the DAC.

Each input has the analog loopback mixer switch (and off as default).
Why it doesn't suffice?


thanks,

Takashi

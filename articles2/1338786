Path: news.gmane.org!not-for-mail
From: Thomas Abraham <thomas.abraham@linaro.org>
Newsgroups: gmane.linux.kernel.samsung-soc,gmane.linux.ports.arm.kernel,gmane.linux.kernel
Subject: =?EUC-KR?B?UmU6IMi4vcU6IMi4vcU6IFtQQVRDSF0gT0RST0lELVg6IGhrZGs0NDEyOiBBZGQg?=
	=?EUC-KR?B?bmV3IGhhcmR3YXJlIGJhc2VkIG9uIEV4eW5vczQ0MTI=?=
Date: Tue, 7 Aug 2012 09:44:15 +0530
Lines: 75
Approved: news@gmane.org
Message-ID: <CAJuYYwT2rrJkrkOSekV+DjpVAHas33_gUGULTjzsYtcq1UAyoQ@mail.gmail.com>
References: <1344262254-14648-1-git-send-email-dongjin.kim@agreeyamobility.net>
	<CAJuYYwSjnQ6z0iUaLCV9guC7yyKH3_pbd1QZe3ELKF-fYNfaqQ@mail.gmail.com>
	<A6A3B7488C419F488E5B13FFD03C08AD2F4362EE@SN2PRD0510MB370.namprd05.prod.outlook.com>
	<CAOesGMh=6QrCmL4EqnSqTxi1nH+8Wn+x=z9BYq8QJCznH3a=zQ@mail.gmail.com>
	<A6A3B7488C419F488E5B13FFD03C08AD2F43688D@SN2PRD0510MB370.namprd05.prod.outlook.com>
	<CAOesGMj6BafLCpZjmtyn_ASbpeic_8E0CdYjQGOf3A4_NHfy=Q@mail.gmail.com>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
X-Trace: dough.gmane.org 1344312897 31822 80.91.229.3 (7 Aug 2012 04:14:57 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Tue, 7 Aug 2012 04:14:57 +0000 (UTC)
Cc: Dongjin Kim <Dongjin.Kim@agreeyamobility.net>,
	Dongjin Kim <tobetter@gmail.com>,
	Kukjin Kim <kgene.kim@samsung.com>,
	Russell King <linux@arm.linux.org.uk>,
	Tony Lindgren <tony@atomide.com>,
	Jon Medhurst <tixy@yxit.co.uk>,
	Shawn Guo <shawn.guo@linaro.org>,
	=?ISO-8859-1?Q?Uwe_Kleine=2DK=F6nig?= 
	<u.kleine-koenig@pengutronix.de>,
	"linux-arm-kernel@lists.infradead.org" 
	<linux-arm-kernel@lists.infradead.org>,
	"linux-samsung-soc@vger.kernel.org" 
	<linux-samsung-soc@vger.kernel.org>,
	"linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
To: Olof Johansson <olof@lixom.net>
Original-X-From: linux-samsung-soc-owner@vger.kernel.org Tue Aug 07 06:14:23 2012
Return-path: <linux-samsung-soc-owner@vger.kernel.org>
Envelope-to: glks-linux-samsung-soc@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-samsung-soc-owner@vger.kernel.org>)
	id 1SybBU-0004WA-Ai
	for glks-linux-samsung-soc@plane.gmane.org; Tue, 07 Aug 2012 06:14:20 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1750809Ab2HGEOS (ORCPT
	<rfc822;glks-linux-samsung-soc@m.gmane.org>);
	Tue, 7 Aug 2012 00:14:18 -0400
Original-Received: from mail-lb0-f174.google.com ([209.85.217.174]:35972 "EHLO
	mail-lb0-f174.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1750727Ab2HGEOR (ORCPT
	<rfc822;linux-samsung-soc@vger.kernel.org>);
	Tue, 7 Aug 2012 00:14:17 -0400
Original-Received: by lbbgm6 with SMTP id gm6so3220405lbb.19
        for <linux-samsung-soc@vger.kernel.org>; Mon, 06 Aug 2012 21:14:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:x-gm-message-state;
        bh=qKYUW3kcwKsJFlh0+vjd6x5fXd1wOLBsbxt2KD1kCko=;
        b=dsbRlXTC/uooroS9a6pKd/FYqBLEgA/Nfe2z+7DeejL+NN0vG5t8NP4hl2OMN4bSd7
         0zkBSIlEhZPbwTQ3qNZr6DT92eVDydvHrdOae/UmJiqLbhNg/SZBGVvotyR2WzLI7/rV
         PUR4HKVC2oh/0tMe/7kQInDKySeAGRpJgnPxZVngWzoqiBoVFvySv8nyCrLWpYFcxIzJ
         1pTHDvjk4rbP0TN28bEglrK/aAVoXipdkIiOS2S8dar/NvZTq3/Qa2Qb6HuDRwHHUuT0
         51UXsdHAd+ODMAZanBdJxwbkI6Mxuzm4EOLgeIHPMOurw5dp67NNMZ9rnBK+y36txleU
         koHg==
Original-Received: by 10.152.131.9 with SMTP id oi9mr12794794lab.39.1344312855430; Mon,
 06 Aug 2012 21:14:15 -0700 (PDT)
Original-Received: by 10.152.3.105 with HTTP; Mon, 6 Aug 2012 21:14:15 -0700 (PDT)
In-Reply-To: <CAOesGMj6BafLCpZjmtyn_ASbpeic_8E0CdYjQGOf3A4_NHfy=Q@mail.gmail.com>
X-Gm-Message-State: ALoCoQn/NUrszzjHk7Rj0Eir61TjOK034j16mhCwPFzshkTJcodfDD1MiBQ/4Os9OIISOYO/2ONs
Original-Sender: linux-samsung-soc-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-samsung-soc.vger.kernel.org>
X-Mailing-List: linux-samsung-soc@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel.samsung-soc:11956 gmane.linux.ports.arm.kernel:180567 gmane.linux.kernel:1338786
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1338786>

On 7 August 2012 07:58, Olof Johansson <olof@lixom.net> wrote:
> Hi,
>
> On Mon, Aug 6, 2012 at 7:05 PM, Dongjin Kim
> <Dongjin.Kim@agreeyamobility.net> wrote:
>> Hello,
>>
>> I am trying to understand what I have to do for device tree.
>>
>> In order to create dts file for ODROID-X hardware, it seems I may need dts file of EXYNOS4412 SoC.
>> But maybe exynos4412.dtsi is not merged yet or not exist, like exynos4210.dtsi or exynos5250.dtsi.
>> Obviously it seems not easy to create such a file without SoC datasheet, and I do not have it.
>>
>> So do I wait for the file to be merged by Samsung or better to create initial dts file cloned from exynos4210.dtsi and modify to have verified nodes with the source/header files?
>
> Ideally they already have one waiting to be submitted, but that might
> not be the case. Given that the origenboard design with 4412 is not
> yet shipping, I'm guessing the Linaro Samsung engineers might not have
> done much work on 4412 yet. Kukjin? Thomas?
>
>> What's your suggestion?
>
> The alternative is to use the data you have available -- i.e. sources
> and patches, and craft the device tree from there. The design of 4412
> is a derivative from 4210, so that's a good start. Next step would be
> to describe the board on top of the SoC, peripherals, etc. Take a look
> at how the origen board support was added, and so on.
>
> I ordered an odroid-x several weeks ago but I haven't have a confirmed
> shipping date yet. :( I'm not sure how long it'll be before I can help
> out, unfortunately.
>
>
> -Olof

Most of the Exynos4210 device tree support can be reused for
Exynos4412 as well. Looking at the hardware differences between the
two, it might be better to create a new exynos4.dtsi file (kind of
creating it out of the existing exynos4210.dtsi) which will have all
the common bits across all SoC's in the Exynos4 family.

Further, there can be exynos4210.dtsi and exynos4412.dtsi which would
specify SoC specific differences such as the GIC cpu-offset property
and the additional groups available in the interrupt combiner.

There are differences in the gpio/pinmux controllers as well which
have to be described using device tree. The current gpio/pinmux device
tree support depends entirely on the gpio-samsung driver which handles
both gpio and pinmux but requires listing all the banks available in
Exynos4412. I would prefer not to do that since we are switching over
to using a pin controller driver and I am currently working on this
driver.

The pin controller driver is important without which the
gpio/pinmux/pinconf setting for devices such as i2c and sdhci
controller cannot be setup. The basic pinctrl driver for Exynos4 has
already been posted and now I am working on adding gpio and wakeup
interrupt support into that driver (hoping to complete it this week).

So the probable steps in getting started with using device tree for
Exynos4412 would be

1. Create a new exynos4.dtsi file with all the Exynos4 common
properties for all dt supported controllers.
2. Update the exynos4210.dtsi file accordingly and add the new
exynos4412.dtsi file.
3. With this, it will be possible to boot the kernel and test
peripherals that do not depend on gpio/pinmux (rtc, wdt, etc).
4. When the Exynos4 pinctrl driver is available, start adding device
nodes for i2c and sdhci controllers.
5. Incrementally add device tree coverage for the board and other
peripherals on Exynos4412.

Thanks,
Thomas.

Path: news.gmane.org!not-for-mail
From: Felipe Balbi <balbi-l0cyMroinI0@public.gmane.org>
Newsgroups: gmane.linux.usb.general,gmane.linux.drivers.devicetree,gmane.linux.documentation,gmane.linux.kernel,gmane.linux.ports.arm.kernel,gmane.linux.ports.arm.omap
Subject: Re: [PATCH v6 01/11] drivers: usb: otg: add a new driver for omap
 usb2 phy
Date: Mon, 6 Aug 2012 12:44:02 +0300
Lines: 73
Approved: news@gmane.org
Message-ID: <20120806094401.GI17551@arwen.pp.htv.fi>
References: <1343639400-28725-1-git-send-email-kishon@ti.com>
 <1343639400-28725-2-git-send-email-kishon@ti.com>
 <20120803132708.GC8269@arwen.pp.htv.fi>
 <CAAe_U6K15Nm5aNs2Vn71G7ELZWka1zB2E3VGZWTc0VjyViJ6Yw@mail.gmail.com>
 <20120806084928.GD17551@arwen.pp.htv.fi>
 <CAAe_U6LhfrRk7PP-Td7BTXPngo7+chvTp4LwwKR_GbsjE4jNJQ@mail.gmail.com>
Reply-To: balbi-l0cyMroinI0@public.gmane.org
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="UthUFkbMtH2ceUK2"
X-Trace: dough.gmane.org 1344246460 31127 80.91.229.3 (6 Aug 2012 09:47:40 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Mon, 6 Aug 2012 09:47:40 +0000 (UTC)
Cc: balbi-l0cyMroinI0@public.gmane.org, grant.likely-s3s/WqlpOiPyB63q8FvJNQ@public.gmane.org, rob.herring-bsGFqQB8/DxBDgjK7y7TUQ@public.gmane.org,
	rob-VoJi6FS/r0vR7s880joybQ@public.gmane.org, linux-lFZ/pmaqli7XmaaqVzeoHQ@public.gmane.org,
	gregkh-hQyY1W1yCW8ekmWlsbkhG0B+6BGkLq7r@public.gmane.org, b-cousson-l0cyMroinI0@public.gmane.org, rnayak-l0cyMroinI0@public.gmane.org,
	tony-4v6yS6AI5VpBDgjK7y7TUQ@public.gmane.org, devicetree-discuss-uLR06cmDAlY/bJ5BZ2RsiQ@public.gmane.org,
	linux-doc-u79uwXL29TY76Z2rM5mHXA@public.gmane.org, linux-kernel-u79uwXL29TY76Z2rM5mHXA@public.gmane.org,
	linux-arm-kernel-IAPFreCvJWM7uuMidbF8XUB+6BGkLq7r@public.gmane.org, linux-omap-u79uwXL29TY76Z2rM5mHXA@public.gmane.org,
	linux-usb-u79uwXL29TY76Z2rM5mHXA@public.gmane.org
To: "ABRAHAM, KISHON VIJAY" <kishon-l0cyMroinI0@public.gmane.org>
Original-X-From: linux-usb-owner-u79uwXL29TY76Z2rM5mHXA@public.gmane.org Mon Aug 06 11:47:38 2012
Return-path: <linux-usb-owner-u79uwXL29TY76Z2rM5mHXA@public.gmane.org>
Envelope-to: glug-linux-usb-wOFGN7rlS/M9smdsby/KFg@public.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-usb-owner-u79uwXL29TY76Z2rM5mHXA@public.gmane.org>)
	id 1SyJuU-00022C-0T
	for glug-linux-usb-wOFGN7rlS/M9smdsby/KFg@public.gmane.org; Mon, 06 Aug 2012 11:47:38 +0200
Original-Received: (majordomo-u79uwXL29TY76Z2rM5mHXA@public.gmane.org) by vger.kernel.org via listexpand
	id S1755369Ab2HFJrg (ORCPT <rfc822;glug-linux-usb@m.gmane.org>);
	Mon, 6 Aug 2012 05:47:36 -0400
Original-Received: from na3sys009aog132.obsmtp.com ([74.125.149.250]:53821 "EHLO
	na3sys009aog132.obsmtp.com" rhost-flags-OK-OK-OK-OK)
	by vger.kernel.org with ESMTP id S1755243Ab2HFJrf (ORCPT
	<rfc822;linux-usb-u79uwXL29TY76Z2rM5mHXA@public.gmane.org>); Mon, 6 Aug 2012 05:47:35 -0400
Original-Received: from mail-lb0-f172.google.com ([209.85.217.172]) (using TLSv1) by na3sys009aob132.postini.com ([74.125.148.12]) with SMTP
	ID DSNKUB+SttlyeGOKlh4yON9bZYHCHPhYzGV/@postini.com; Mon, 06 Aug 2012 02:47:35 PDT
Original-Received: by lbbgg6 with SMTP id gg6so325532lbb.31
        for <linux-usb-u79uwXL29TY76Z2rM5mHXA@public.gmane.org>; Mon, 06 Aug 2012 02:47:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=date:from:to:cc:subject:message-id:reply-to:references:mime-version
         :content-type:content-disposition:in-reply-to:user-agent
         :x-gm-message-state;
        bh=A+cPmDhrB23pwAsWSkqR38E2OwVBjrMKSQMYFTuPZhU=;
        b=F3cagxelDEAuwgCGgGo0k1D49PXq00OXdCa0hsX4ExXzyc978D6armFGVQoWMUagSw
         XgF8aHDxKKthES50TlM0W6GVHAhm7NcujmxsHCNumBXe8gLxqqjZc0LwNLZomapEYj46
         aV5WDvCpnfoSnF8Ha1wpRRJY6mOUP/jrVMIDGFhuQEaGfSOe9umXgS4T3fKKDayd2WUj
         3ahBX5hjzGuUXvBgoRJ7g1rqHNNNMk35PriSdvQ6ofUkfoko2dSCiuJyTG6Zz+CrnWzX
         Ln6lt66C8E1hL0QnG+qJSJaiOMfiVzq1hwAMVUJ1fokA/tTxPsaU175hEx9DRkTD6AyU
         VMSg==
Original-Received: by 10.112.25.4 with SMTP id y4mr4377665lbf.61.1344246453206;
        Mon, 06 Aug 2012 02:47:33 -0700 (PDT)
Original-Received: from localhost (cs78217178.pp.htv.fi. [62.78.217.178])
        by mx.google.com with ESMTPS id j1sm3621243lby.8.2012.08.06.02.47.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 06 Aug 2012 02:47:32 -0700 (PDT)
Content-Disposition: inline
In-Reply-To: <CAAe_U6LhfrRk7PP-Td7BTXPngo7+chvTp4LwwKR_GbsjE4jNJQ-JsoAwUIsXosN+BqQ9rBEUg@public.gmane.org>
User-Agent: Mutt/1.5.21 (2010-09-15)
X-Gm-Message-State: ALoCoQmK804u55m4xptY0/gdeZJAuiuhF+KgH5Jljvuxipk1OiZrmlKwwWzykUtUxBecay88IMVM
Original-Sender: linux-usb-owner-u79uwXL29TY76Z2rM5mHXA@public.gmane.org
Precedence: bulk
List-ID: <linux-usb.vger.kernel.org>
X-Mailing-List: linux-usb-u79uwXL29TY76Z2rM5mHXA@public.gmane.org
Xref: news.gmane.org gmane.linux.usb.general:68931 gmane.linux.drivers.devicetree:19085 gmane.linux.documentation:6074 gmane.linux.kernel:1338159 gmane.linux.ports.arm.kernel:180355 gmane.linux.ports.arm.omap:81813
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1338159>


--UthUFkbMtH2ceUK2
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Mon, Aug 06, 2012 at 03:14:42PM +0530, ABRAHAM, KISHON VIJAY wrote:
> >> >> +static int omap_usb2_runtime_resume(struct device *dev)
> >> >> +{
> >> >> +     u32 ret =3D 0;
> >> >> +     struct platform_device  *pdev =3D to_platform_device(dev);
> >> >> +     struct omap_usb *phy =3D platform_get_drvdata(pdev);
> >> >> +
> >> >> +     ret =3D clk_enable(phy->wkupclk);
> >> >> +     if (ret < 0)
> >> >> +             dev_err(phy->dev, "Failed to enable wkupclk %d\n", re=
t);
> >> >> +
> >> >> +     return ret;
> >> >> +}
> >> >> +
> >> >> +static const struct dev_pm_ops omap_usb2_pm_ops =3D {
> >> >> +     SET_RUNTIME_PM_OPS(omap_usb2_runtime_suspend, omap_usb2_runti=
me_resume,
> >> >> +             NULL)
> >> >
> >> > only runtime ? What about static suspend ? We need this to work also
> >> > after a traditional echo mem > /sys/power/state ;-)
> >>
> >> The static suspend case is handled by users of this phy using
> >> set_suspend hooks.
> >
> > I'm not sure if that's too wise, what if your user enabled USB, but
> > for whatever reason loaded only the phy driver and not musb or dwc3. It
> > will fail, right ?
>=20
> The enabling and disabling of phy is solely governed by usb controller
> driver (musb/dwc3). So if you dont have musb/dwc3 loaded, the phy will
> be for sure disabled.

fair enough... that's ok then ;-)

--=20
balbi

--UthUFkbMtH2ceUK2
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQIcBAEBAgAGBQJQH5HhAAoJEIaOsuA1yqREFAYP/0Tg9jYi+w6+3EISdUAnuQXj
g8RJET/C2H72vx/2MS7PbqLhNb22pAw1+NrEB1hq3z450DTln+yRg0xVsYL7/OkQ
qLrW4ARCG7CUd54n1gDPuIlOkH1qpcNxenpJfxxOuTbs+vejXWBulBzoRfbFZySy
uh8GA3mFOvrBqmkeWhNlPQ2qoWhETEXgxqkmylX0FSW67arB/qWvkwVuPuGv/O70
y1MnXvUPeoYUVRm30m8TKzFMWrX58A5YqfPuwEmuOhziJpHT0lUKxL3xJhDD//qZ
zD9P4D5KXKnx23ruFlfRCdfFMs8SNPRTgQvdTr9gQnM+U0eaHUQFSRFiVYZHHdB0
EQZPqWp0qUhAGAJendrDXhfPjaUo8cyvVFdWx4uOAkObn5AutP2s+FOZIF6HmGg8
ewAmRcB4uKgeG9DNiVyfhCh3s3C7nLMgAn9/adQFmfXRK3Z+bos4Hr1BJ9+RXAL1
2o0imPpz2x7fucPoXoQBYoKJME+29d5slCfpK42ypHo9CS8Q/yUaxmSS1DUhpTmM
Y5T0pGNmHHXnZAHT2vdR31OaUnMpMFgGA1jk/76grdnA62eAEgtEXp4A7TqAzL14
6HQahuxXnPZuoDH/WZJtvVOpEDdFI/MuCJVw0t8dM2U7bgjQD0ep7U94TNFSVm6N
kiZ5+IO93rKVrF0oxTCv
=nEBC
-----END PGP SIGNATURE-----

--UthUFkbMtH2ceUK2--
--
To unsubscribe from this list: send the line "unsubscribe linux-usb" in
the body of a message to majordomo-u79uwXL29TY76Z2rM5mHXA@public.gmane.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html


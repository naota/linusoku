Path: news.gmane.org!not-for-mail
From: Thierry Reding <thierry.reding@avionic-design.de>
Newsgroups: gmane.linux.kernel.samsung-soc,gmane.linux.kernel
Subject: Re: [PATCH] ARM: EXYNOS: Use generic pwm driver in Origen board
Date: Thu, 9 Aug 2012 13:32:56 +0200
Lines: 83
Approved: news@gmane.org
Message-ID: <20120809113256.GA15402@avionic-0098.mockup.avionic-design.de>
References: <1344503035-18127-1-git-send-email-tushar.behera@linaro.org>
 <20120809091526.GA693@avionic-0098.mockup.avionic-design.de>
 <50239DEB.5080209@linaro.org>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="vtzGhvizbBRQ85DL"
X-Trace: dough.gmane.org 1344511991 22736 80.91.229.3 (9 Aug 2012 11:33:11 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Thu, 9 Aug 2012 11:33:11 +0000 (UTC)
Cc: linux-samsung-soc@vger.kernel.org, linux-kernel@vger.kernel.org,
	kgene.kim@samsung.com, patches@linaro.org,
	Jingoo Han <jg1.han@samsung.com>
To: Tushar Behera <tushar.behera@linaro.org>
Original-X-From: linux-samsung-soc-owner@vger.kernel.org Thu Aug 09 13:33:09 2012
Return-path: <linux-samsung-soc-owner@vger.kernel.org>
Envelope-to: glks-linux-samsung-soc@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-samsung-soc-owner@vger.kernel.org>)
	id 1SzQzC-00019I-Hc
	for glks-linux-samsung-soc@plane.gmane.org; Thu, 09 Aug 2012 13:33:06 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S932115Ab2HILdF (ORCPT
	<rfc822;glks-linux-samsung-soc@m.gmane.org>);
	Thu, 9 Aug 2012 07:33:05 -0400
Original-Received: from moutng.kundenserver.de ([212.227.17.8]:57302 "EHLO
	moutng.kundenserver.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S932073Ab2HILdE (ORCPT
	<rfc822;linux-samsung-soc@vger.kernel.org>);
	Thu, 9 Aug 2012 07:33:04 -0400
Original-Received: from mailbox.adnet.avionic-design.de (mailbox.avionic-design.de [109.75.18.3])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0LvNjj-1TgZGy1H6p-0103Gd; Thu, 09 Aug 2012 13:32:59 +0200
Original-Received: from localhost (localhost [127.0.0.1])
	by mailbox.adnet.avionic-design.de (Postfix) with ESMTP id B6B5D2A282D7;
	Thu,  9 Aug 2012 13:32:58 +0200 (CEST)
X-Virus-Scanned: amavisd-new at avionic-design.de
Original-Received: from mailbox.adnet.avionic-design.de ([127.0.0.1])
	by localhost (mailbox.avionic-design.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0u9sNPhZcyBL; Thu,  9 Aug 2012 13:32:56 +0200 (CEST)
Original-Received: from localhost (avionic-0098.adnet.avionic-design.de [172.20.31.233])
	(Authenticated sender: thierry.reding)
	by mailbox.adnet.avionic-design.de (Postfix) with ESMTPA id DF1292A280F2;
	Thu,  9 Aug 2012 13:32:56 +0200 (CEST)
Content-Disposition: inline
In-Reply-To: <50239DEB.5080209@linaro.org>
User-Agent: Mutt/1.5.21 (2010-09-15)
X-Provags-ID: V02:K0:gcVK51DWcV4LU8vAh7nKiRSDOMjXN7aT7FokDfp6cxM
 GCy4HLAJ9Het8R04nw/O2EtSX8oRS4TxlnwoJyb02ZyrLL/hyQ
 3ymc/DPXxJpxt3u+xPdNKaQluSm3a+X8gDiq1YnsF6G3MLm1wf
 6FQ7UsRetzLZJJjC9AtFenXO+1DL/C5UDrDEYv2Eb30u7bS3o9
 xirCaEdV0j4ecSCdFtfofi3FRweNVdtYh7r+1D28LD4K69HeSq
 EEMlzixWCHzUogPnwEqZJCyD5O0v/skw8csuPpEjCJYpNIO4Kv
 ZVmbZ6DinOdBSJ3TkX2M5iZRETmiZ3RbRdNinxo6ebvyBbHzLk
 qcBJd6LyfNC+BX+WNu2G5mHcqfjQG4LMC8qugduBthb7y1JzBp
 lOSqX72kip00TXJB76NhNSIAscKojTjpT4=
Original-Sender: linux-samsung-soc-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-samsung-soc.vger.kernel.org>
X-Mailing-List: linux-samsung-soc@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel.samsung-soc:12044 gmane.linux.kernel:1340635
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1340635>


--vtzGhvizbBRQ85DL
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Thu, Aug 09, 2012 at 04:54:27PM +0530, Tushar Behera wrote:
> + linux-kernel@vger.kernel.org
> - linux-kernel@lists.infradead.org
>=20
> On 08/09/2012 02:45 PM, Thierry Reding wrote:
> > On Thu, Aug 09, 2012 at 02:33:55PM +0530, Tushar Behera wrote:
> >> Signed-off-by: Tushar Behera <tushar.behera@linaro.org>
> >> ---
> >>  arch/arm/mach-exynos/mach-origen.c |   11 +++++++++++
> >>  1 files changed, 11 insertions(+), 0 deletions(-)
> >>
> >> diff --git a/arch/arm/mach-exynos/mach-origen.c b/arch/arm/mach-exynos=
/mach-origen.c
> >> index 5ca8030..4c4048d 100644
> >> --- a/arch/arm/mach-exynos/mach-origen.c
> >> +++ b/arch/arm/mach-exynos/mach-origen.c
> > [...]
> >> @@ -613,6 +614,10 @@ static struct platform_device origen_lcd_hv070wsa=
 =3D {
> >>  	.dev.platform_data	=3D &origen_lcd_hv070wsa_data,
> >>  };
> >> =20
> >> +static struct pwm_lookup origen_pwm_lookup[] =3D {
> >> +	PWM_LOOKUP("s3c24xx-pwm.0", 0, "pwm-backlight.0", NULL),
> >> +};
> >> +
> >=20
> > This might conflict with some other patches that Jingoo (Cc'ed) is
> > working on. His patches were going to rework the Samsung PWM driver to
> > register multiple PWM devices per chip. In that case the s3c24xx-pwm
> > device should probably be modified to use .id =3D -1 and then the .0 can
> > be dropped from the provider name above.
> >=20
> > Otherwise this patch looks good to me.
> >=20
> > Thierry
> >=20
> Thanks for your review.
>=20
> It was wrong for me to create s3c24xx-pwm platform device as it is
> already created in samsung_bl_set(). Hence I would be dropping that.
>=20
> However, dropping .0 from provider name results in following. (as the
> device name is s3c24xx-pwm.N).
>=20
> [    0.240000] pwm-backlight pwm-backlight.0: unable to request PWM,
> trying legacy API

That's to be expected. Dropping the .0 requires further changes to the
driver and in arch/arm/plat-samsung/devs.c to register only a single
instance of the s3c24xx-pwm device which can handle all 5 PWM devices.
This should be done separately, though.

Thierry

--vtzGhvizbBRQ85DL
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.19 (GNU/Linux)

iQIcBAEBAgAGBQJQI5/oAAoJEN0jrNd/PrOhe7IP/2s0omYmQ1QHaopg1fjEOJk1
SOYa1Q0cZJ/yLdhm9nWorgRXRsFlCU54TXp6ltINCVePp8b6Rplw5YOY6leCIbi7
D/XdAXFA3RGZ2PBFvwxt/AeqjTR2KF5oHAuoycwPH3KkeXFt+hSzyVsEzj93JapL
IFW6zwCrCM0Li5U7qMLgvDEYpjO5Jiv0TbVWnAKddm0y3WxE38VZ/uFMHTY+dDUM
a81/QwNQRBVWodBZftmjBaBGLeDachws9sTq0sVBIflmae/6wwYr6y9aWV6Wyj1w
DNF8oSwQ5JQAhLXv+LDbaNi7dnB6rgL0wjVFe939fN8hHvAywR7Hrc31bPFJILrj
8lEWD+2zCYEApcrRpqRO8SmJMPxCta9gJ4KKrAN8vgXflX98i329UpHI55iqvfJ2
xI6DX/elnemfkbo80ilejPAzCClJSKKeDjT0m0VJfjPliqKJ9hRzlSko3Wm5G/au
St/I4ieYxYGl+N3WpYwzu7stdQFwEn5aRqazEK00quGh7t6qbCCSmAXNdx0eMDMN
elSmf8dPrX806I2QG74X7UpFJUUOmtHqHYKlqKVtOJhATH20yyjRsCgTF9ZZ3ha3
5fmVavCRudpaLrIr9YKm9h0opgCpXQSrTd/2H0+xehLeXoPHvd51c1tYO6OSJLnB
XlAtJ1h/bgEf3u35DI+y
=1oFd
-----END PGP SIGNATURE-----

--vtzGhvizbBRQ85DL--

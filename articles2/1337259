Path: news.gmane.org!not-for-mail
From: "Poddar, Sourav" <sourav.poddar@ti.com>
Newsgroups: gmane.linux.kernel,gmane.linux.drivers.devicetree,gmane.linux.ports.arm.omap,gmane.linux.ports.arm.kernel
Subject: Re: [PATCH 3/4] arm/dts: omap5-evm: Add keypad data
Date: Fri, 3 Aug 2012 18:36:04 +0530
Lines: 62
Approved: news@gmane.org
Message-ID: <CAKdam54HpC33Bk8gDjRRcB+9=O8Dh4UAKhY4mpHBdvk_uEj9uQ@mail.gmail.com>
References: <1343997486-710-1-git-send-email-sourav.poddar@ti.com>
	<1343997486-710-4-git-send-email-sourav.poddar@ti.com>
	<D32DBB77-844C-400A-9E3F-3F779431D1C7@dominion.thruhere.net>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
X-Trace: dough.gmane.org 1343999177 6654 80.91.229.3 (3 Aug 2012 13:06:17 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Fri, 3 Aug 2012 13:06:17 +0000 (UTC)
Cc: linux-kernel@vger.kernel.org, devicetree-discuss@lists.ozlabs.org,
	linux-omap@vger.kernel.org, linux-arm-kernel@lists.infradead.org,
	Benoit Cousson <b-cousson@ti.com>, Felipe Balbi <balbi@ti.com>,
	Santosh Shilimkar <santosh.shilimkar@ti.com>
To: Koen Kooi <koen@dominion.thruhere.net>
Original-X-From: linux-kernel-owner@vger.kernel.org Fri Aug 03 15:06:17 2012
Return-path: <linux-kernel-owner@vger.kernel.org>
Envelope-to: glk-linux-kernel-3@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-kernel-owner@vger.kernel.org>)
	id 1SxHa3-0002N4-Qx
	for glk-linux-kernel-3@plane.gmane.org; Fri, 03 Aug 2012 15:06:16 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753492Ab2HCNGJ (ORCPT <rfc822;glk-linux-kernel-3@m.gmane.org>);
	Fri, 3 Aug 2012 09:06:09 -0400
Original-Received: from na3sys009aob106.obsmtp.com ([74.125.149.76]:52784 "EHLO
	na3sys009aog106.obsmtp.com" rhost-flags-OK-OK-OK-FAIL)
	by vger.kernel.org with ESMTP id S1752037Ab2HCNGF (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Fri, 3 Aug 2012 09:06:05 -0400
Original-Received: from mail-ob0-f174.google.com ([209.85.214.174]) (using TLSv1) by na3sys009aob106.postini.com ([74.125.148.12]) with SMTP
	ID DSNKUBvMvOQU05DrrJiEzyP6TQMPlhx93d/M@postini.com; Fri, 03 Aug 2012 06:06:05 PDT
Original-Received: by obbuo13 with SMTP id uo13so1167583obb.33
        for <linux-kernel@vger.kernel.org>; Fri, 03 Aug 2012 06:06:04 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:x-gm-message-state;
        bh=d2p4fQ0TCEHpxA9E8IWzQdrHQfbjMrdRB3uIxxg6cEk=;
        b=aPa4g5dhIJewesmfY8Dnb0u1sdlfFLXH1RkhZUcvhhDvDKm4HeI8/dx/109s92aTY2
         nyiQQercfnC0PJy3a7/6LoRypk7k0z/ixvgAV003Hh9jx12gFsYfOCVoZUDeBBckhsif
         gyu+RqqDhedyuuiCXB8yQXIi2Ghr9aBldbSuaUDz36U8xlg209L3bPicpH7arOlpLidk
         dvP3jg4u722Q+b4pUu8Cc5oBFUj8MSI5O3pmwN2thWMGG72LEY0tXqBrMftIzufV/0KK
         lWROxuGHOTbTc2GjgWuZqbUd2MNvH9ipc10zcJqtReIw3JMBUgdqgidlmYlnwHEYuB5g
         0XzQ==
Original-Received: by 10.182.111.74 with SMTP id ig10mr4655680obb.14.1343999164199;
 Fri, 03 Aug 2012 06:06:04 -0700 (PDT)
Original-Received: by 10.76.81.164 with HTTP; Fri, 3 Aug 2012 06:06:04 -0700 (PDT)
In-Reply-To: <D32DBB77-844C-400A-9E3F-3F779431D1C7@dominion.thruhere.net>
X-Gm-Message-State: ALoCoQmI/Qv2iffVaMJJcsDBXom/gB9GzhUC85IeujDbC5BQLxDMiuol8aW0meikP1H/03XxsIfM
Original-Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel:1337259 gmane.linux.drivers.devicetree:19004 gmane.linux.ports.arm.omap:81753 gmane.linux.ports.arm.kernel:180053
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1337259>

Hi,

On Fri, Aug 3, 2012 at 6:20 PM, Koen Kooi <koen@dominion.thruhere.net> wrote:
>
> Op 3 aug. 2012, om 14:38 heeft Sourav Poddar <sourav.poddar@ti.com> het volgende geschreven:
>
>> Add keypad data node in omap5 device tree file.
>> Also fill the device tree binding parameters
>> with the required value in "omap5-evm" dts file.
>>
>> Tested on omap5430 evm with 3.5 custom kernel.
>>
>> Cc: Benoit Cousson <b-cousson@ti.com>
>> Cc: Felipe Balbi <balbi@ti.com>
>> Cc: Santosh Shilimkar <santosh.shilimkar@ti.com>
>> Acked-by: Felipe Balbi <balbi@ti.com>
>> Signed-off-by: Sourav Poddar <sourav.poddar@ti.com>
>> ---
>> arch/arm/boot/dts/omap5-evm.dts |   12 ++++++++++++
>> arch/arm/boot/dts/omap5.dtsi    |    5 +++++
>> 2 files changed, 17 insertions(+), 0 deletions(-)
>>
>> diff --git a/arch/arm/boot/dts/omap5-evm.dts b/arch/arm/boot/dts/omap5-evm.dts
>> index 45a8aeb..09fe941 100644
>> --- a/arch/arm/boot/dts/omap5-evm.dts
>> +++ b/arch/arm/boot/dts/omap5-evm.dts
>> @@ -17,6 +17,18 @@
>>               device_type = "memory";
>>               reg = <0x80000000 0x40000000>; /* 1 GB */
>>       };
>> +
>> +     keypad {
>> +             keypad,num-rows = <8>;
>> +             keypad,num-columns = <8>;
>> +             linux,keymap = < 0x02020073
>> +                     0x02030072
>> +                     0x020400e7
>> +                     0x02050066
>> +                     0x0206006b
>> +                     0x020700d9 >;
>> +             linux,input-no-autorepeat;
>> +     };
>
> This not a criticism on your patch, but a generic question about DT: Is there no way to have nice constants for keys like we have in the kernel, like KEY_POWER, KEY_UP, etc?
There is way, something like this ..
               key_C {
                       keypad,row = <2>;
                       keypad,column = <1>;
                       linux,code = <46>;
               };
But its not the preferred approach mainly because of the fact that
it is too big. So suppose, if we have 100 key codes, we will have
400 -500 lines of code in our dts file for the mapping only.
 If no, does DT allow comments so I can look at a dts and see which
keycodes are mapped instead of having to dig up the sources?
Yes, comments are allowed and seems to be better option to do.

~Sourav
>
> regards,
>
> Koen

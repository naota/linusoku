Path: news.gmane.org!not-for-mail
From: Stefan Priebe <s.priebe@profihost.ag>
Newsgroups: gmane.linux.kernel,gmane.comp.emulators.kvm.devel
Subject: Re: KVM segfaults with 3.5 while installing ubuntu 12.04
Date: Tue, 31 Jul 2012 19:30:47 +0200
Lines: 69
Approved: news@gmane.org
Message-ID: <50181647.5000701@profihost.ag>
References: <5017C8A0.60506@profihost.ag> <5017F19E.4070308@redhat.com>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Trace: dough.gmane.org 1343755856 29862 80.91.229.3 (31 Jul 2012 17:30:56 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Tue, 31 Jul 2012 17:30:56 +0000 (UTC)
Cc: mtosatti@redhat.com, kvm@vger.kernel.org,
	LKML <linux-kernel@vger.kernel.org>
To: Avi Kivity <avi@redhat.com>
Original-X-From: linux-kernel-owner@vger.kernel.org Tue Jul 31 19:30:56 2012
Return-path: <linux-kernel-owner@vger.kernel.org>
Envelope-to: glk-linux-kernel-3@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-kernel-owner@vger.kernel.org>)
	id 1SwGHX-0001ME-2A
	for glk-linux-kernel-3@plane.gmane.org; Tue, 31 Jul 2012 19:30:55 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1753513Ab2GaRap (ORCPT <rfc822;glk-linux-kernel-3@m.gmane.org>);
	Tue, 31 Jul 2012 13:30:45 -0400
Original-Received: from mail.profihost.ag ([85.158.179.208]:41422 "EHLO
	mail.profihost.ag" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
	with ESMTP id S1752353Ab2GaRan (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Tue, 31 Jul 2012 13:30:43 -0400
Original-Received: (qmail 25817 invoked from network); 31 Jul 2012 19:30:41 +0200
Original-Received: from fw-office.allied-internet.ag (HELO [10.23.66.100]) (85.158.179.66)
  (smtp-auth username s.priebe@profihost.ag, mechanism plain)
  by mail.profihost.ag (qpsmtpd/0.82) with (AES256-SHA encrypted) ESMTPSA; Tue, 31 Jul 2012 19:30:41 +0200
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20120713 Thunderbird/14.0
In-Reply-To: <5017F19E.4070308@redhat.com>
X-User-Auth: Auth by s.priebe@profihost.ag through 85.158.179.66
Original-Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel:1335902 gmane.comp.emulators.kvm.devel:95338
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1335902>

Am 31.07.2012 16:54, schrieb Avi Kivity:
> On 07/31/2012 02:59 PM, Stefan Priebe - Profihost AG wrote:
>> Hello list,
>>
>> i hope it is correct to list the maintainers of kvm. While trying to
>> install ubuntu 12.04 amd64 on a kvm based vm the KVM process segfaults
>> while ubuntu tries to detect the HW:
>> kvm[2978]: segfault at 7fb90d9035e0 ip 00007fb90d9035e0
>> sp00007fff652e4ed8 error 15
>>
>> This does not happen with a rhel6 based 2.6.32 kernel so i thought this
>> must be a bug in vanilla 3.5.0 kernel.
>>
>> Is this known? What information do you need?
>>
> Please build qemu with debug information, generate a core, and post a
> backtrace.

mhm tried that but i can't get it to work:

gdb /usr/bin/qemu-system-x86_64 /core

GNU gdb (GDB) 7.0.1-debian
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
<http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...

warning: The current binary is a PIE (Position Independent Executable), 
which
GDB does NOT currently support.  Most debugger features will fail if used
in this session.

Reading symbols from /usr/bin/qemu-system-x86_64...done.

warning: core file may not match specified executable file.
[New Thread 2222]
[New Thread 1809]
[New Thread 1811]
[New Thread 1807]
[New Thread 1812]
[New Thread 1810]
[New Thread 1813]
[New Thread 1806]
[New Thread 1808]
Core was generated by `/usr/bin/qemu-system-x86_64 -id 103 -chardev 
socket,id=qmp,path=/var/run/qemu-s'.
Program terminated with signal 11, Segmentation fault.
#0  0x00007f6ca10faed8 in ?? ()
(gdb) where
#0  0x00007f6ca10faed8 in ?? ()
#1  0x00007f6ca54e0098 in ?? ()
#2  0x00007f6ca10faf18 in ?? ()
#3  0x00007f6ca10fae98 in ?? ()
#4  0x00007fffc18a5330 in ?? ()
#5  0x40620711c948c800 in ?? ()
#6  0x00007fffc18a51f0 in ?? ()
#7  0x00007f6ca54e0e25 in ?? ()
#8  0x00007f6ca10faf18 in ?? ()
#9  0x00007f6ca10fae98 in ?? ()
#10 0x0000000000000000 in ?? ()

Greets,
Stefan

Path: news.gmane.org!not-for-mail
From: KY Srinivasan <kys@microsoft.com>
Newsgroups: gmane.linux.kernel,gmane.linux.drivers.driver-project.devel,gmane.linux.network
Subject: RE: [PATCH 13/17] Tools: hv: Implement the KVP verb -
 KVP_OP_SET_IP_INFO
Date: Mon, 30 Jul 2012 19:12:22 +0000
Lines: 200
Approved: news@gmane.org
Message-ID: <426367E2313C2449837CD2DE46E7EAF9236AA80F@SN2PRD0310MB382.namprd03.prod.outlook.com>
References: <1343145672-3641-1-git-send-email-kys@microsoft.com>
 <1343145701-3691-1-git-send-email-kys@microsoft.com>
 <1343145701-3691-13-git-send-email-kys@microsoft.com>
 <20120730173323.GA533@aepfle.de>
NNTP-Posting-Host: plane.gmane.org
Mime-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
X-Trace: dough.gmane.org 1343675571 9814 80.91.229.3 (30 Jul 2012 19:12:51 GMT)
X-Complaints-To: usenet@dough.gmane.org
NNTP-Posting-Date: Mon, 30 Jul 2012 19:12:51 +0000 (UTC)
Cc: "gregkh@linuxfoundation.org" <gregkh@linuxfoundation.org>,
	"linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
	"devel@linuxdriverproject.org" <devel@linuxdriverproject.org>,
	"apw@canonical.com" <apw@canonical.com>,
	"netdev@vger.kernel.org" <netdev@vger.kernel.org>,
	"ben@decadent.org.uk" <ben@decadent.org.uk>
To: Olaf Hering <olaf@aepfle.de>
Original-X-From: linux-kernel-owner@vger.kernel.org Mon Jul 30 21:12:49 2012
Return-path: <linux-kernel-owner@vger.kernel.org>
Envelope-to: glk-linux-kernel-3@plane.gmane.org
Original-Received: from vger.kernel.org ([209.132.180.67])
	by plane.gmane.org with esmtp (Exim 4.69)
	(envelope-from <linux-kernel-owner@vger.kernel.org>)
	id 1SvvOa-0004Ec-1q
	for glk-linux-kernel-3@plane.gmane.org; Mon, 30 Jul 2012 21:12:48 +0200
Original-Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S1754539Ab2G3TMj (ORCPT <rfc822;glk-linux-kernel-3@m.gmane.org>);
	Mon, 30 Jul 2012 15:12:39 -0400
Original-Received: from tx2ehsobe004.messaging.microsoft.com ([65.55.88.14]:22521 "EHLO
	tx2outboundpool.messaging.microsoft.com" rhost-flags-OK-OK-OK-OK)
	by vger.kernel.org with ESMTP id S1753922Ab2G3TMh (ORCPT
	<rfc822;linux-kernel@vger.kernel.org>);
	Mon, 30 Jul 2012 15:12:37 -0400
Original-Received: from mail171-tx2-R.bigfish.com (10.9.14.252) by
 TX2EHSOBE006.bigfish.com (10.9.40.26) with Microsoft SMTP Server id
 14.1.225.23; Mon, 30 Jul 2012 19:12:36 +0000
Original-Received: from mail171-tx2 (localhost [127.0.0.1])	by
 mail171-tx2-R.bigfish.com (Postfix) with ESMTP id 2F72C320110;	Mon, 30 Jul
 2012 19:12:36 +0000 (UTC)
X-Forefront-Antispam-Report: CIP:131.107.125.8;KIP:(null);UIP:(null);IPV:NLI;H:TK5EX14HUBC106.redmond.corp.microsoft.com;RD:none;EFVD:NLI
X-SpamScore: -8
X-BigFish: VS-8(zz98dI9371I542M1432Izz1202hzzz2fh2a8h683h839h93fhd25hf0ah107ah)
Received-SPF: pass (mail171-tx2: domain of microsoft.com designates 131.107.125.8 as permitted sender) client-ip=131.107.125.8; envelope-from=kys@microsoft.com; helo=TK5EX14HUBC106.redmond.corp.microsoft.com ;icrosoft.com ;
X-Forefront-Antispam-Report-Untrusted: CIP:157.56.234.5;KIP:(null);UIP:(null);(null);H:SN2PRD0310HT001.namprd03.prod.outlook.com;R:internal;EFV:INT
Original-Received: from mail171-tx2 (localhost.localdomain [127.0.0.1]) by mail171-tx2
 (MessageSwitch) id 1343675553925737_19427; Mon, 30 Jul 2012 19:12:33 +0000
 (UTC)
Original-Received: from TX2EHSMHS028.bigfish.com (unknown [10.9.14.247])	by
 mail171-tx2.bigfish.com (Postfix) with ESMTP id DEF7B420046;	Mon, 30 Jul 2012
 19:12:33 +0000 (UTC)
Original-Received: from TK5EX14HUBC106.redmond.corp.microsoft.com (131.107.125.8) by
 TX2EHSMHS028.bigfish.com (10.9.99.128) with Microsoft SMTP Server (TLS) id
 14.1.225.23; Mon, 30 Jul 2012 19:12:33 +0000
Original-Received: from am1outboundpool.messaging.microsoft.com (157.54.51.112) by
 mail.microsoft.com (157.54.80.61) with Microsoft SMTP Server (TLS) id
 14.2.309.3; Mon, 30 Jul 2012 19:12:29 +0000
Original-Received: from mail114-am1-R.bigfish.com (10.3.201.247) by
 AM1EHSOBE001.bigfish.com (10.3.204.21) with Microsoft SMTP Server id
 14.1.225.23; Mon, 30 Jul 2012 19:12:27 +0000
Original-Received: from mail114-am1 (localhost [127.0.0.1])	by
 mail114-am1-R.bigfish.com (Postfix) with ESMTP id 81307340389;	Mon, 30 Jul
 2012 19:12:27 +0000 (UTC)
Original-Received: from mail114-am1 (localhost.localdomain [127.0.0.1]) by mail114-am1
 (MessageSwitch) id 1343675545239040_18289; Mon, 30 Jul 2012 19:12:25 +0000
 (UTC)
Original-Received: from AM1EHSMHS019.bigfish.com (unknown [10.3.201.228])	by
 mail114-am1.bigfish.com (Postfix) with ESMTP id 363BE3C008C;	Mon, 30 Jul 2012
 19:12:25 +0000 (UTC)
Original-Received: from SN2PRD0310HT001.namprd03.prod.outlook.com (157.56.234.5) by
 AM1EHSMHS019.bigfish.com (10.3.207.157) with Microsoft SMTP Server (TLS) id
 14.1.225.23; Mon, 30 Jul 2012 19:12:25 +0000
Original-Received: from SN2PRD0310MB382.namprd03.prod.outlook.com ([169.254.1.7]) by
 SN2PRD0310HT001.namprd03.prod.outlook.com ([10.255.112.36]) with mapi id
 14.16.0175.005; Mon, 30 Jul 2012 19:12:22 +0000
Thread-Topic: [PATCH 13/17] Tools: hv: Implement the KVP verb -
 KVP_OP_SET_IP_INFO
Thread-Index: AQHNabffApGkoXQ/oEyNNUVPYtB2bpdCH2aAgAAVt1A=
In-Reply-To: <20120730173323.GA533@aepfle.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [173.61.56.91]
X-OrganizationHeadersPreserved: SN2PRD0310HT001.namprd03.prod.outlook.com
X-FOPE-CONNECTOR: Id%0$Dn%*$RO%0$TLS%0$FQDN%$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%AEPFLE.DE$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%LINUXFOUNDATION.ORG$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%VGER.KERNEL.ORG$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%LINUXDRIVERPROJECT.ORG$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%CANONICAL.COM$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-FOPE-CONNECTOR: Id%59$Dn%DECADENT.ORG.UK$RO%2$TLS%6$FQDN%131.107.125.5$TlsDn%
X-CrossPremisesHeadersPromoted: TK5EX14HUBC106.redmond.corp.microsoft.com
X-CrossPremisesHeadersFiltered: TK5EX14HUBC106.redmond.corp.microsoft.com
X-OriginatorOrg: microsoft.com
Original-Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
Xref: news.gmane.org gmane.linux.kernel:1335253 gmane.linux.drivers.driver-project.devel:29081 gmane.linux.network:238735
Archived-At: <http://permalink.gmane.org/gmane.linux.kernel/1335253>

DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogT2xhZiBIZXJpbmcgW21h
aWx0bzpvbGFmQGFlcGZsZS5kZV0NCj4gU2VudDogTW9uZGF5LCBKdWx5IDMwLCAyMDEyIDE6MzMg
UE0NCj4gVG86IEtZIFNyaW5pdmFzYW4NCj4gQ2M6IGdyZWdraEBsaW51eGZvdW5kYXRpb24ub3Jn
OyBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3JnOw0KPiBkZXZlbEBsaW51eGRyaXZlcnByb2pl
Y3Qub3JnOyBhcHdAY2Fub25pY2FsLmNvbTsgbmV0ZGV2QHZnZXIua2VybmVsLm9yZzsNCj4gYmVu
QGRlY2FkZW50Lm9yZy51aw0KPiBTdWJqZWN0OiBSZTogW1BBVENIIDEzLzE3XSBUb29sczogaHY6
IEltcGxlbWVudCB0aGUgS1ZQIHZlcmIgLQ0KPiBLVlBfT1BfU0VUX0lQX0lORk8NCj4gDQo+IE9u
IFR1ZSwgSnVsIDI0LCBLLiBZLiBTcmluaXZhc2FuIHdyb3RlOg0KPiANCj4gPiArc3RhdGljIGNo
YXIgKmt2cF9nZXRfaWZfbmFtZShjaGFyICpndWlkKQ0KPiA+ICt7DQo+ID4gKwlESVIgKmRpcjsN
Cj4gPiArCXN0cnVjdCBkaXJlbnQgKmVudHJ5Ow0KPiA+ICsJRklMRSAgICAqZmlsZTsNCj4gPiAr
CWNoYXIgICAgKnAsICpxLCAqeDsNCj4gPiArCWNoYXIgICAgKmlmX25hbWUgPSBOVUxMOw0KPiA+
ICsJY2hhciAgICBidWZbMjU2XTsNCj4gPiArCWNoYXIgKmt2cF9uZXRfZGlyID0gIi9zeXMvY2xh
c3MvbmV0LyI7DQo+ID4gKwljaGFyIGRldl9pZFsxMDBdOw0KPiANCj4gUGVyaGFwcyB0aGlzIGNh
biBiZSB3cml0dGVuIGFzIGNoYXIgZGV2X2lkWzEwMF0gPSAic2hvcnQgc3RyaW5nIjs/DQoNCldo
eT8NCg0KPiANCj4gPiArDQo+ID4gKwlkaXIgPSBvcGVuZGlyKGt2cF9uZXRfZGlyKTsNCj4gPiAr
CWlmIChkaXIgPT0gTlVMTCkNCj4gPiArCQlyZXR1cm4gTlVMTDsNCj4gPiArDQo+ID4gKwltZW1z
ZXQoZGV2X2lkLCAwLCBzaXplb2YoZGV2X2lkKSk7DQo+ID4gKwlzdHJjYXQoZGV2X2lkLCBrdnBf
bmV0X2Rpcik7DQo+ID4gKwlxID0gZGV2X2lkICsgc3RybGVuKGt2cF9uZXRfZGlyKTsNCj4gPiAr
DQo+ID4gKwl3aGlsZSAoKGVudHJ5ID0gcmVhZGRpcihkaXIpKSAhPSBOVUxMKSB7DQo+ID4gKwkJ
LyoNCj4gPiArCQkgKiBTZXQgdGhlIHN0YXRlIGZvciB0aGUgbmV4dCBwYXNzLg0KPiA+ICsJCSAq
Lw0KPiA+ICsJCSpxID0gJ1wwJzsNCj4gPiArCQlzdHJjYXQoZGV2X2lkLCBlbnRyeS0+ZF9uYW1l
KTsNCj4gPiArCQlzdHJjYXQoZGV2X2lkLCAiL2RldmljZS9kZXZpY2VfaWQiKTsNCj4gDQo+IE1h
eWJlIHRoaXMgKGFuZCBvdGhlcikgc3RyY2F0IHNob3VsZCBiZSBjaGFuZ2VkIHRvIHNucHJpbnRm
Pw0KDQpBbHJlYWR5IGRvbmUuDQoNCj4gDQoNCg0KPiA+ICsNCj4gPiArCQlmaWxlID0gZm9wZW4o
ZGV2X2lkLCAiciIpOw0KPiA+ICsJCWlmIChmaWxlID09IE5VTEwpDQo+ID4gKwkJCWNvbnRpbnVl
Ow0KPiA+ICsNCj4gPiArCQlwID0gZmdldHMoYnVmLCBzaXplb2YoYnVmKSwgZmlsZSk7DQo+ID4g
KwkJaWYgKHApIHsNCj4gPiArCQkJeCA9IHN0cmNocihwLCAnXG4nKTsNCj4gPiArCQkJaWYgKHgp
DQo+ID4gKwkJCQkqeCA9ICdcMCc7DQo+ID4gKw0KPiA+ICsJCQlpZiAoIXN0cmNtcChwLCBndWlk
KSkgew0KPiA+ICsJCQkJLyoNCj4gPiArCQkJCSAqIEZvdW5kIHRoZSBndWlkIG1hdGNoOyByZXR1
cm4gdGhlIGludGVyZmFjZQ0KPiA+ICsJCQkJICogbmFtZS4gVGhlIGNhbGxlciB3aWxsIGZyZWUg
dGhlIG1lbW9yeS4NCj4gPiArCQkJCSAqLw0KPiA+ICsJCQkJaWZfbmFtZSA9IHN0cmR1cChlbnRy
eS0+ZF9uYW1lKTsNCj4gPiArCQkJCWJyZWFrOw0KPiANCj4gVGhpcyB3aWxsIGxlYXZlICdmaWxl
JyBvcGVuLg0KPiBJIGhhdmUgc2VlbiBpdCBpbiBzb21lIG90aGVyIHBsYWNlIGFzIHdlbGwuDQoN
Ckkgd2lsbCBhdWRpdCBhbGwgaW5zdGFuY2VzIGFuZCBmaXggaXQuDQoNCj4gDQo+ID4gKwkJCX0N
Cj4gPiArCQl9DQo+ID4gKwkJZmNsb3NlKGZpbGUpOw0KPiA+ICsJfQ0KPiA+ICsNCj4gPiArCWNs
b3NlZGlyKGRpcik7DQo+ID4gKwlyZXR1cm4gaWZfbmFtZTsNCj4gPiArfQ0KPiA+ICsNCj4gPiAr
LyoNCj4gPiArICogUmV0cmlldmUgdGhlIE1BQyBhZGRyZXNzIGdpdmVuIHRoZSBpbnRlcmZhY2Ug
bmFtZS4NCj4gPiArICovDQo+ID4gKw0KPiA+ICtzdGF0aWMgY2hhciAqa3ZwX2lmX25hbWVfdG9f
bWFjKGNoYXIgKmlmX25hbWUpDQo+ID4gK3sNCj4gPiArCUZJTEUgICAgKmZpbGU7DQo+ID4gKwlj
aGFyICAgICpwLCAqeDsNCj4gPiArCWNoYXIgICAgYnVmWzI1Nl07DQo+ID4gKwljaGFyIGFkZHJf
ZmlsZVsxMDBdOw0KPiA+ICsJaW50IGk7DQo+ID4gKwljaGFyICptYWNfYWRkciA9IE5VTEw7DQo+
ID4gKw0KPiA+ICsJbWVtc2V0KGFkZHJfZmlsZSwgMCwgc2l6ZW9mKGFkZHJfZmlsZSkpOw0KPiA+
ICsJc3RyY2F0KGFkZHJfZmlsZSwgIi9zeXMvY2xhc3MvbmV0LyIpOw0KPiA+ICsJc3RyY2F0KGFk
ZHJfZmlsZSwgaWZfbmFtZSk7DQo+ID4gKwlzdHJjYXQoYWRkcl9maWxlLCAiL2FkZHJlc3MiKTsN
Cj4gDQo+IHNucHJpbnRmPw0KDQpBbHJlYWR5IGZpeGVkLg0KDQo+IA0KPiA+ICsNCj4gPiArCWZp
bGUgPSBmb3BlbihhZGRyX2ZpbGUsICJyIik7DQo+ID4gKwlpZiAoZmlsZSA9PSBOVUxMKQ0KPiA+
ICsJCXJldHVybiBOVUxMOw0KPiA+ICsNCj4gPiArCXAgPSBmZ2V0cyhidWYsIHNpemVvZihidWYp
LCBmaWxlKTsNCj4gPiArCWlmIChwKSB7DQo+ID4gKwkJeCA9IHN0cmNocihwLCAnXG4nKTsNCj4g
PiArCQlpZiAoeCkNCj4gPiArCQkJKnggPSAnXDAnOw0KPiA+ICsJCWZvciAoaSA9IDA7IGkgPCBz
dHJsZW4ocCk7IGkrKykNCj4gPiArCQkJcFtpXSA9IHRvdXBwZXIocFtpXSk7DQo+ID4gKwkJbWFj
X2FkZHIgPSBzdHJkdXAocCk7DQo+ID4gKwl9DQo+ID4gKw0KPiA+ICsJZmNsb3NlKGZpbGUpOw0K
PiA+ICsJcmV0dXJuIG1hY19hZGRyOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICsNCj4gPiAgc3RhdGlj
IHZvaWQga3ZwX3Byb2Nlc3NfaXBjb25maWdfZmlsZShjaGFyICpjbWQsDQo+ID4gIAkJCQkJY2hh
ciAqY29uZmlnX2J1ZiwgaW50IGxlbiwNCj4gPiAgCQkJCQlpbnQgZWxlbWVudF9zaXplLCBpbnQg
b2Zmc2V0KQ0KPiA+IEBAIC04MDAsNiArOTEwLDMxNCBAQCBnZXRhZGRyX2RvbmU6DQo+ID4gIH0N
Cj4gPg0KPiA+DQo+ID4gK3N0YXRpYyBpbnQgZXhwYW5kX2lwdjYoY2hhciAqYWRkciwgaW50IHR5
cGUpDQo+ID4gK3sNCj4gPiArCWludCByZXQ7DQo+ID4gKwlzdHJ1Y3QgaW42X2FkZHIgdjZfYWRk
cjsNCj4gPiArDQo+ID4gKwlyZXQgPSBpbmV0X3B0b24oQUZfSU5FVDYsIGFkZHIsICZ2Nl9hZGRy
KTsNCj4gPiArDQo+ID4gKwlpZiAocmV0ICE9IDEpIHsNCj4gPiArCQlpZiAodHlwZSA9PSBORVRN
QVNLKQ0KPiA+ICsJCQlyZXR1cm4gMTsNCj4gPiArCQlyZXR1cm4gMDsNCj4gPiArCX0NCj4gPiAr
DQo+ID4gKwlzcHJpbnRmKGFkZHIsICIlMDJ4JTAyeDolMDJ4JTAyeDolMDJ4JTAyeDolMDJ4JTAy
eDolMDJ4JTAyeDoiDQo+ID4gKwkJIiUwMnglMDJ4OiUwMnglMDJ4OiUwMnglMDJ4IiwNCj4gPiAr
CQkoaW50KXY2X2FkZHIuczZfYWRkclswXSwgKGludCl2Nl9hZGRyLnM2X2FkZHJbMV0sDQo+ID4g
KwkJKGludCl2Nl9hZGRyLnM2X2FkZHJbMl0sIChpbnQpdjZfYWRkci5zNl9hZGRyWzNdLA0KPiA+
ICsJCShpbnQpdjZfYWRkci5zNl9hZGRyWzRdLCAoaW50KXY2X2FkZHIuczZfYWRkcls1XSwNCj4g
PiArCQkoaW50KXY2X2FkZHIuczZfYWRkcls2XSwgKGludCl2Nl9hZGRyLnM2X2FkZHJbN10sDQo+
ID4gKwkJKGludCl2Nl9hZGRyLnM2X2FkZHJbOF0sIChpbnQpdjZfYWRkci5zNl9hZGRyWzldLA0K
PiA+ICsJCShpbnQpdjZfYWRkci5zNl9hZGRyWzEwXSwgKGludCl2Nl9hZGRyLnM2X2FkZHJbMTFd
LA0KPiA+ICsJCShpbnQpdjZfYWRkci5zNl9hZGRyWzEyXSwgKGludCl2Nl9hZGRyLnM2X2FkZHJb
MTNdLA0KPiA+ICsJCShpbnQpdjZfYWRkci5zNl9hZGRyWzE0XSwgKGludCl2Nl9hZGRyLnM2X2Fk
ZHJbMTVdKTsNCj4gPiArDQo+ID4gKwlyZXR1cm4gMTsNCj4gPiArDQo+ID4gK30NCj4gPiArDQo+
ID4gK3N0YXRpYyBpbnQgaXNfaXB2NChjaGFyICphZGRyKQ0KPiA+ICt7DQo+ID4gKwlpbnQgcmV0
Ow0KPiA+ICsJc3RydWN0IGluX2FkZHIgaXB2NF9hZGRyOw0KPiA+ICsNCj4gPiArCXJldCA9IGlu
ZXRfcHRvbihBRl9JTkVULCBhZGRyLCAmaXB2NF9hZGRyKTsNCj4gPiArDQo+ID4gKwlpZiAocmV0
ID09IDEpDQo+ID4gKwkJcmV0dXJuIDE7DQo+ID4gKwlyZXR1cm4gMDsNCj4gPiArfQ0KPiA+ICsN
Cj4gPiArc3RhdGljIGludCBwYXJzZV9pcF92YWxfYnVmZmVyKGNoYXIgKmluX2J1ZiwgaW50ICpv
ZmZzZXQsDQo+ID4gKwkJCQljaGFyICpvdXRfYnVmLCBpbnQgb3V0X2xlbikNCj4gPiArew0KPiA+
ICsJY2hhciAqeDsNCj4gPiArCWNoYXIgKnN0YXJ0Ow0KPiA+ICsNCj4gPiArCS8qDQo+ID4gKwkg
KiBpbl9idWYgaGFzIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgdGhhdCBhcmUgc2VwZXJhdGVkIGJ5
DQo+ID4gKwkgKiB0aGUgY2hhcmFjdGVyICc7Jy4gVGhlIGxhc3Qgc2VxdWVuY2UgZG9lcyBub3Qg
aGF2ZSB0aGUNCj4gPiArCSAqIHRlcm1pbmF0aW5nICI7IiBjaGFyYWN0ZXIuDQo+ID4gKwkgKi8N
Cj4gPiArCXN0YXJ0ID0gaW5fYnVmICsgKm9mZnNldDsNCj4gPiArDQo+ID4gKwl4ID0gc3RyY2hy
KHN0YXJ0LCAnOycpOw0KPiA+ICsJaWYgKHgpDQo+ID4gKwkJKnggPSAwOw0KPiA+ICsJZWxzZQ0K
PiA+ICsJCXggPSBzdGFydCArIHN0cmxlbihzdGFydCk7DQo+ID4gKw0KPiA+ICsJaWYgKHN0cmxl
bihzdGFydCkgIT0gMCkgew0KPiA+ICsJCWludCBpID0gMDsNCj4gPiArCQkvKg0KPiA+ICsJCSAq
IEdldCByaWQgb2YgbGVhZGluZyBzcGFjZXMuDQo+ID4gKwkJICovDQo+ID4gKwkJd2hpbGUgKHN0
YXJ0W2ldID09ICcgJykNCj4gPiArCQkJaSsrOw0KPiA+ICsNCj4gPiArCQlpZiAoKHggLSBzdGFy
dCkgPD0gb3V0X2xlbikgew0KPiA+ICsJCQlzdHJjcHkob3V0X2J1ZiwgKHN0YXJ0ICsgaSkpOw0K
PiA+ICsJCQkqb2Zmc2V0ICs9ICh4IC0gc3RhcnQpICsgMTsNCj4gPiArCQkJcmV0dXJuIDE7DQo+
ID4gKwkJfQ0KPiA+ICsJfQ0KPiA+ICsJcmV0dXJuIDA7DQo+ID4gK30NCj4gPiArDQo+ID4gK3N0
YXRpYyBpbnQga3ZwX3dyaXRlX2ZpbGUoRklMRSAqZiwgY2hhciAqczEsIGNoYXIgKnMyLCBjaGFy
ICpzMykNCj4gPiArew0KPiA+ICsJY2hhciBzdHJbMjU2XTsNCj4gPiArCWludCBlcnJvcjsNCj4g
PiArDQo+ID4gKwltZW1zZXQoc3RyLCAwLCBzaXplb2Yoc3RyKSk7DQo+ID4gKwlzdHJjYXQoc3Ry
LCBzMSk7DQo+ID4gKwlpZiAoczIgIT0gTlVMTCkNCj4gPiArCQlzdHJjYXQoc3RyLCBzMik7DQo+
ID4gKwlzdHJjYXQoc3RyLCAiPSIpOw0KPiA+ICsJc3RyY2F0KHN0ciwgczMpOw0KPiA+ICsJc3Ry
Y2F0KHN0ciwgIlxuIik7DQo+ID4gKw0KPiA+ICsJZXJyb3IgPSBmcHV0cyhzdHIsIGYpOw0KPiA+
ICsJaWYgKGVycm9yID09IEVPRikNCj4gPiArCQlyZXR1cm4gSFZfRV9GQUlMOw0KPiA+ICsNCj4g
PiArCXJldHVybiAwOw0KPiA+ICt9DQo+ID4gKw0KPiA+ICsNCj4gPiArc3RhdGljIGludCBwcm9j
ZXNzX2lwX3N0cmluZyhGSUxFICpmLCBjaGFyICppcF9zdHJpbmcsIGludCB0eXBlKQ0KPiA+ICt7
DQo+ID4gKwlpbnQgZXJyb3IgPSAwOw0KPiA+ICsJY2hhciBhZGRyW0lORVQ2X0FERFJTVFJMRU5d
Ow0KPiA+ICsJaW50IGkgPSAwOw0KPiA+ICsJaW50IGogPSAwOw0KPiA+ICsJY2hhciBzdHJbMjU2
XTsNCj4gPiArCWNoYXIgc3ViX3N0clsxMF07DQo+ID4gKwlpbnQgb2Zmc2V0ID0gMDsNCj4gPiAr
DQo+ID4gKwltZW1zZXQoYWRkciwgMCwgc2l6ZW9mKGFkZHIpKTsNCj4gPiArDQo+ID4gKwl3aGls
ZSAocGFyc2VfaXBfdmFsX2J1ZmZlcihpcF9zdHJpbmcsICZvZmZzZXQsIGFkZHIsDQo+ID4gKwkJ
CQkJKE1BWF9JUF9BRERSX1NJWkUgKiAyKSkpIHsNCj4gPiArCQltZW1zZXQoc3ViX3N0ciwgMCwg
c2l6ZW9mKHN1Yl9zdHIpKTsNCj4gPiArCQltZW1zZXQoc3RyLCAwLCBzaXplb2Yoc3RyKSk7DQo+
ID4gKw0KPiA+ICsJCWlmIChpc19pcHY0KGFkZHIpKSB7DQo+ID4gKwkJCXN3aXRjaCAodHlwZSkg
ew0KPiA+ICsJCQljYXNlIElQQUREUjoNCj4gPiArCQkJCXN0cmNhdChzdHIsICJJUEFERFIiKTsN
Cj4gPiArCQkJCWJyZWFrOw0KPiA+ICsJCQljYXNlIE5FVE1BU0s6DQo+ID4gKwkJCQlzdHJjYXQo
c3RyLCAiTkVUTUFTSyIpOw0KPiA+ICsJCQkJYnJlYWs7DQo+ID4gKwkJCWNhc2UgR0FURVdBWToN
Cj4gPiArCQkJCXN0cmNhdChzdHIsICJHQVRFV0FZIik7DQo+ID4gKwkJCQlicmVhazsNCj4gPiAr
CQkJY2FzZSBETlM6DQo+ID4gKwkJCQlzdHJjYXQoc3RyLCAiRE5TIik7DQo+ID4gKwkJCQlicmVh
azsNCj4gPiArCQkJfQ0KPiA+ICsJCQlpZiAoaSAhPSAwKSB7DQo+ID4gKwkJCQlpZiAodHlwZSAh
PSBETlMpDQo+ID4gKwkJCQkJc3ByaW50ZihzdWJfc3RyLCAiXyVkIiwgaSsrKTsNCj4gPiArCQkJ
CWVsc2UNCj4gPiArCQkJCQlzcHJpbnRmKHN1Yl9zdHIsICIlZCIsICsraSk7DQo+ID4gKwkJCX0g
ZWxzZSBpZiAodHlwZSA9PSBETlMpIHsNCj4gPiArCQkJCXNwcmludGYoc3ViX3N0ciwgIiVkIiwg
KytpKTsNCj4gPiArCQkJfQ0KPiA+ICsNCj4gPiArDQo+ID4gKwkJfSBlbHNlIGlmIChleHBhbmRf
aXB2NihhZGRyLCB0eXBlKSkgew0KPiA+ICsJCQlzd2l0Y2ggKHR5cGUpIHsNCj4gPiArCQkJY2Fz
ZSBJUEFERFI6DQo+ID4gKwkJCQlzdHJjYXQoc3RyLCAiSVBWNkFERFIiKTsNCj4gPiArCQkJCWJy
ZWFrOw0KPiA+ICsJCQljYXNlIE5FVE1BU0s6DQo+ID4gKwkJCQlzdHJjYXQoc3RyLCAiSVBWNk5F
VE1BU0siKTsNCj4gPiArCQkJCWJyZWFrOw0KPiA+ICsJCQljYXNlIEdBVEVXQVk6DQo+ID4gKwkJ
CQlzdHJjYXQoc3RyLCAiSVBWNl9ERUZBVUxUR1ciKTsNCj4gPiArCQkJCWJyZWFrOw0KPiA+ICsJ
CQljYXNlIEROUzoNCj4gPiArCQkJCXN0cmNhdChzdHIsICJETlMiKTsNCj4gPiArCQkJCWJyZWFr
Ow0KPiA+ICsJCQl9DQo+ID4gKwkJCWlmICgoaiAhPSAwKSB8fCAodHlwZSA9PSBETlMpKSB7DQo+
ID4gKwkJCQlpZiAodHlwZSAhPSBETlMpDQo+ID4gKwkJCQkJc3ByaW50ZihzdWJfc3RyLCAiXyVk
IiwgaisrKTsNCj4gPiArCQkJCWVsc2UNCj4gPiArCQkJCQlzcHJpbnRmKHN1Yl9zdHIsICIlZCIs
ICsraSk7DQo+ID4gKwkJCX0gZWxzZSBpZiAodHlwZSA9PSBETlMpIHsNCj4gPiArCQkJCXNwcmlu
dGYoc3ViX3N0ciwgIiVkIiwgKytpKTsNCj4gPiArCQkJfQ0KPiA+ICsJCX0gZWxzZSB7DQo+ID4g
KwkJCXJldHVybiAgSFZfSU5WQUxJREFSRzsNCj4gPiArCQl9DQo+ID4gKw0KPiA+ICsJCWVycm9y
ID0ga3ZwX3dyaXRlX2ZpbGUoZiwgc3RyLCBzdWJfc3RyLCBhZGRyKTsNCj4gPiArCQlpZiAoZXJy
b3IpDQo+ID4gKwkJCXJldHVybiBlcnJvcjsNCj4gPiArCQltZW1zZXQoYWRkciwgMCwgc2l6ZW9m
KGFkZHIpKTsNCj4gPiArCX0NCj4gPiArDQo+ID4gKwlyZXR1cm4gMDsNCj4gPiArfQ0KPiA+ICsN
Cj4gPiArc3RhdGljIGludCBrdnBfc2V0X2lwX2luZm8oY2hhciAqaWZfbmFtZSwgc3RydWN0IGh2
X2t2cF9pcGFkZHJfdmFsdWUNCj4gKm5ld192YWwpDQo+ID4gK3sNCj4gPiArCWludCBlcnJvciA9
IDA7DQo+ID4gKwljaGFyIGlmX2ZpbGVbNTBdOw0KPiA+ICsJRklMRSAqZmlsZTsNCj4gPiArCWNo
YXIgY21kWzUxMl07DQo+ID4gKwljaGFyICptYWNfYWRkcjsNCj4gPiArDQo+ID4gKwkvKg0KPiA+
ICsJICogU2V0IHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGUgc3BlY2lmaWVkIGludGVyZmFjZSB3
aXRoDQo+ID4gKwkgKiB0aGUgaW5mb3JtYXRpb24gcHJvdmlkZWQuIFNpbmNlIHRoZXJlIGlzIG5v
IHN0YW5kYXJkDQo+ID4gKwkgKiB3YXkgdG8gY29uZmlndXJlIGFuIGludGVyZmFjZSwgd2Ugd2ls
bCBoYXZlIGFuIGV4dGVybmFsDQo+ID4gKwkgKiBzY3JpcHQgdGhhdCBkb2VzIHRoZSBqb2Igb2Yg
Y29uZmlndXJpbmcgdGhlIGludGVyZmFjZSBhbmQNCj4gPiArCSAqIGZsdXNoaW5nIHRoZSBjb25m
aWd1cmF0aW9uLg0KPiA+ICsJICoNCj4gPiArCSAqIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCB0byB0
aGlzIGV4dGVybmFsIHNjcmlwdCBhcmU6DQo+ID4gKwkgKiAxLiBBIGNvbmZpZ3VyYXRpb24gZmls
ZSB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGNvbmZpZ3VyYXRpb24uDQo+ID4gKwkgKg0KPiA+ICsJ
ICogV2Ugd2lsbCBlbWJlZCB0aGUgbmFtZSBvZiB0aGUgaW50ZXJmYWNlIGluIHRoZSBjb25maWd1
cmF0aW9uDQo+ID4gKwkgKiBmaWxlOiBpZmNmZy1ldGh4ICh3aGVyZSBldGh4IGlzIHRoZSBpbnRl
cmZhY2UgbmFtZSkuDQo+ID4gKwkgKg0KPiA+ICsJICogSGVyZSBpcyB0aGUgZm9ybWF0IG9mIHRo
ZSBpcCBjb25maWd1cmF0aW9uIGZpbGU6DQo+ID4gKwkgKg0KPiA+ICsJICogSFdBRERSPW1hY2Fk
ZHINCj4gPiArCSAqIEJPT1RQUk9UTz1kaGNwIChkaGNwIGVuYWJsZWQgZm9yIHRoZSBpbnRlcmZh
Y2UpDQo+ID4gKwkgKiBOTV9DT05UUk9MTEVEPW5vICh0aGlzIGludGVyZmFjZSB3aWxsIG5vdCBi
ZSBjb250cm9sbGVkIGJ5IE5NKQ0KPiA+ICsJICogUEVFUkROUz15ZXMNCj4gPiArCSAqIElQQURE
Ul94PWlwYWRkcg0KPiA+ICsJICogTkVUTUFTS194PW5ldG1hc2sNCj4gPiArCSAqIEdBVEVXQVlf
eD1nYXRld2F5DQo+ID4gKwkgKiBETlN4PWRucw0KPiA+ICsJICoNCj4gPiArCSAqIElQVjYgYWRk
cmVzc2VzIHdpbGwgYmUgdGFnZ2VkIGFzIElQVjZBRERSLCBJUFY2IGdhdGV3YXkgd2lsbCBiZQ0K
PiA+ICsJICogdGFnZ2VkIGFzIElQVjZfREVGQVVMVEdXIGFuZCBJUFY2IE5FVE1BU0sgd2lsbCBi
ZSB0YWdnZWQgYXMNCj4gPiArCSAqIElQVjZORVRNQVNLLg0KPiA+ICsJICovDQo+ID4gKw0KPiA+
ICsJbWVtc2V0KGlmX2ZpbGUsIDAsIHNpemVvZihpZl9maWxlKSk7DQo+ID4gKwlzdHJjYXQoaWZf
ZmlsZSwgIi92YXIvb3B0L2h5cGVydi9pZmNmZy0iKTsNCj4gPiArCXN0cmNhdChpZl9maWxlLCBp
Zl9uYW1lKTsNCj4gPiArDQo+ID4gKwlmaWxlID0gZm9wZW4oaWZfZmlsZSwgInciKTsNCj4gPiAr
DQo+ID4gKwlpZiAoZmlsZSA9PSBOVUxMKSB7DQo+ID4gKwkJc3lzbG9nKExPR19FUlIsICJGYWls
ZWQgdG8gb3BlbiBjb25maWcgZmlsZSIpOw0KPiA+ICsJCXJldHVybiBIVl9FX0ZBSUw7DQo+ID4g
Kwl9DQo+ID4gKw0KPiA+ICsJLyoNCj4gPiArCSAqIEZpcnN0IHdyaXRlIG91dCB0aGUgTUFDIGFk
ZHJlc3MuDQo+ID4gKwkgKi8NCj4gPiArDQo+ID4gKwltYWNfYWRkciA9IGt2cF9pZl9uYW1lX3Rv
X21hYyhpZl9uYW1lKTsNCj4gPiArCWlmIChtYWNfYWRkciA9PSBOVUxMKSB7DQo+ID4gKwkJZXJy
b3IgPSBIVl9FX0ZBSUw7DQo+ID4gKwkJZ290byBzZXR2YWxfZXJyb3I7DQo+ID4gKwl9DQo+ID4g
Kw0KPiA+ICsJZXJyb3IgPSBrdnBfd3JpdGVfZmlsZShmaWxlLCAiSFdBRERSIiwgTlVMTCwgbWFj
X2FkZHIpOw0KPiA+ICsJaWYgKGVycm9yKQ0KPiA+ICsJCWdvdG8gc2V0dmFsX2Vycm9yOw0KPiA+
ICsNCj4gPiArCWVycm9yID0ga3ZwX3dyaXRlX2ZpbGUoZmlsZSwgIk9OQk9PVCIsIE5VTEwsICJ5
ZXMiKTsNCj4gPiArCWlmIChlcnJvcikNCj4gPiArCQlnb3RvIHNldHZhbF9lcnJvcjsNCj4gPiAr
DQo+ID4gKwllcnJvciA9IGt2cF93cml0ZV9maWxlKGZpbGUsICJJUFY2SU5JVCIsIE5VTEwsICJ5
ZXMiKTsNCj4gPiArCWlmIChlcnJvcikNCj4gPiArCQlnb3RvIHNldHZhbF9lcnJvcjsNCj4gPiAr
DQo+ID4gKwllcnJvciA9IGt2cF93cml0ZV9maWxlKGZpbGUsICJOTV9DT05UUk9MTEVEIiwgTlVM
TCwgIm5vIik7DQo+ID4gKwlpZiAoZXJyb3IpDQo+ID4gKwkJZ290byBzZXR2YWxfZXJyb3I7DQo+
ID4gKw0KPiA+ICsJZXJyb3IgPSBrdnBfd3JpdGVfZmlsZShmaWxlLCAiUEVFUkROUyIsIE5VTEws
ICJ5ZXMiKTsNCj4gPiArCWlmIChlcnJvcikNCj4gPiArCQlnb3RvIHNldHZhbF9lcnJvcjsNCj4g
PiArDQo+ID4gKwlpZiAobmV3X3ZhbC0+ZGhjcF9lbmFibGVkKSB7DQo+ID4gKwkJZXJyb3IgPSBr
dnBfd3JpdGVfZmlsZShmaWxlLCAiQk9PVFBST1RPIiwgTlVMTCwgImRoY3AiKTsNCj4gPiArCQlp
ZiAoZXJyb3IpDQo+ID4gKwkJCWdvdG8gc2V0dmFsX2Vycm9yOw0KPiA+ICsNCj4gPiArCQkvKg0K
PiA+ICsJCSAqIFdlIGFyZSBkb25lIS4NCj4gPiArCQkgKi8NCj4gPiArCQlnb3RvIHNldHZhbF9k
b25lOw0KPiA+ICsJfQ0KPiA+ICsNCj4gPiArCS8qDQo+ID4gKwkgKiBXcml0ZSB0aGUgY29uZmln
dXJhdGlvbiBmb3IgaXBhZGRyZXNzLCBuZXRtYXNrLCBnYXRld2F5IGFuZA0KPiA+ICsJICogbmFt
ZSBzZXJ2ZXJzLg0KPiA+ICsJICovDQo+ID4gKw0KPiA+ICsJZXJyb3IgPSBwcm9jZXNzX2lwX3N0
cmluZyhmaWxlLCAoY2hhciAqKW5ld192YWwtPmlwX2FkZHIsIElQQUREUik7DQo+ID4gKwlpZiAo
ZXJyb3IpDQo+ID4gKwkJZ290byBzZXR2YWxfZXJyb3I7DQo+ID4gKw0KPiA+ICsJZXJyb3IgPSBw
cm9jZXNzX2lwX3N0cmluZyhmaWxlLCAoY2hhciAqKW5ld192YWwtPnN1Yl9uZXQsIE5FVE1BU0sp
Ow0KPiA+ICsJaWYgKGVycm9yKQ0KPiA+ICsJCWdvdG8gc2V0dmFsX2Vycm9yOw0KPiA+ICsNCj4g
PiArCWVycm9yID0gcHJvY2Vzc19pcF9zdHJpbmcoZmlsZSwgKGNoYXIgKiluZXdfdmFsLT5nYXRl
X3dheSwgR0FURVdBWSk7DQo+ID4gKwlpZiAoZXJyb3IpDQo+ID4gKwkJZ290byBzZXR2YWxfZXJy
b3I7DQo+ID4gKw0KPiA+ICsJZXJyb3IgPSBwcm9jZXNzX2lwX3N0cmluZyhmaWxlLCAoY2hhciAq
KW5ld192YWwtPmRuc19hZGRyLCBETlMpOw0KPiA+ICsJaWYgKGVycm9yKQ0KPiA+ICsJCWdvdG8g
c2V0dmFsX2Vycm9yOw0KPiA+ICsNCj4gPiArc2V0dmFsX2RvbmU6DQo+ID4gKwlmcmVlKG1hY19h
ZGRyKTsNCj4gPiArCWZjbG9zZShmaWxlKTsNCj4gPiArDQo+ID4gKwkvKg0KPiA+ICsJICogTm93
IHRoYXQgd2UgaGF2ZSBwb3B1bGF0ZWQgdGhlIGNvbmZpZ3VyYXRpb24gZmlsZSwNCj4gPiArCSAq
IGludm9rZSB0aGUgZXh0ZXJuYWwgc2NyaXB0IHRvIGRvIGl0cyBtYWdpYy4NCj4gPiArCSAqLw0K
PiA+ICsNCj4gPiArCW1lbXNldChjbWQsIDAsIHNpemVvZihjbWQpKTsNCj4gPiArCXN0cmNhdChj
bWQsICIvc2Jpbi9odl9zZXRfaWZjb25maWcgIik7DQo+ID4gKwlzdHJjYXQoY21kLCBpZl9maWxl
KTsNCj4gDQo+IFRoZSBuZXcgcGF0Y2ggc2hvdWxkIHVzZSAiJXMgJXMiLCBub3QgIiVzJXMiIGFz
IGZvcm1hdCBzdHJpbmcuDQo+IA0KPiANCj4gDQoNClRoYW5rcyBPbGFmLA0KDQpLLiBZDQo=


